# realsync 数据同步 LuCI 应用

## 项目简介

**realsync** 是一款基于 OpenWrt 的数据实时同步与自动备份工具，配套 LuCI Web 界面，支持多任务、定时同步、日志查看、权限控制等功能，适用于路由器、NAS、边缘网关等多种场景。

---

## 本项目解决的痛点

1. **OpenWrt/嵌入式设备缺乏易用的数据同步方案**
   - 传统 rsync、inotifywait 等工具虽强大，但在 OpenWrt 路由器、NAS 等设备上缺乏一站式、可视化的配置与管理方式。
   - 用户手动写脚本、定时任务，维护成本高，易出错。
2. **多任务同步难以统一管理**
   - 多目录、多目标同步需求普遍，原生方案难以批量配置、启停、监控每个同步任务。
3. **缺乏实时状态与日志反馈**
   - 用户无法直观了解同步任务的运行状态、失败原因、同步历史，排障困难。
4. **权限与安全管理不便**
   - 传统脚本方式难以与 OpenWrt 的 ACL 权限体系集成，存在安全隐患。
5. **安装部署复杂，依赖环境不友好**
   - 传统方案依赖多、安装步骤繁琐，普通用户难以快速上手。

---

## 本项目的优势

- **LuCI 可视化管理界面**：全流程 Web 配置，零命令行基础也能轻松管理同步任务。支持任务的增删改查、启停、状态监控、日志查看等一站式操作。
- **多任务支持与灵活配置**：支持任意数量的同步任务，每个任务可独立配置源/目标目录、同步间隔、是否删除源文件等参数，适合多目录、多设备同步场景。
- **实时日志与状态反馈**：支持任务运行状态、服务状态、详细日志的实时查看与一键清空，便于用户及时发现和定位问题。
- **一键安装/卸载脚本，极简部署**：提供专业的安装/卸载脚本，自动检测依赖、复制文件、设置权限、清理缓存，极大降低部署门槛。支持一键卸载，便于维护和升级。
- **与 OpenWrt 权限体系无缝集成**：支持 ACL 权限控制，安全可靠，适合多用户环境。
- **中英文双语支持，国际化友好**：适合国内外用户和开源社区推广。

---

## 主要功能

- 多任务数据同步配置
- 支持 rsync + inotifywait 实时/定时同步
- LuCI 界面可视化管理、状态监控、日志查看
- 一键清空日志、强制重启服务
- 权限控制（ACL）安全可靠
- 支持中英文界面

---

## 安装方法

1. 上传本项目所有文件到 OpenWrt 路由器（推荐 `/root` 或 `/tmp` 目录）。
2. 赋予安装脚本执行权限：
   ```sh
   git clone https://github.com/xfghvgnfyjssjgte/Luci-app-Realsync.git
   cd realsync
   chmod +x install_realsync.sh
   ```
3. 执行安装：
   ```sh
   ./install_realsync.sh install
   ```
4. 安装过程中会自动检查并安装依赖（rsync、inotify-tools），复制所有文件，设置权限，启用并启动服务。
5. 安装完成后，登录 LuCI，进入“服务”->“realsync”进行配置和管理。

---

## 升级方法

对于已安装的用户，可以使用升级脚本更新到最新版本，同时保留您的配置：

```sh
chmod +x update_realsync.sh
./update_realsync.sh
```

升级脚本会执行以下操作：
- 备份当前配置
- 停止服务
- 更新所有应用文件（除配置文件外）
- 重启服务
- 重启 uhttpd 确保 LuCI 界面正常显示

**注意**：升级过程中您的配置将被保留。

---

## 使用说明

- 在 LuCI 界面添加/编辑同步任务，填写源目录、目标目录、同步间隔等参数。
- 可随时启用/停用任务，查看任务运行状态和详细日志。
- 支持一键清空日志、强制重启服务。
- 日志文件位于 `/var/log/realsync.log`。

---

## 常见问题

- **Q: 安装后界面无显示？**
  - 请清理浏览器缓存，或重启 uhttpd。
- **Q: 日志无法清空？**
  - 请确认有写权限，或重启服务后再试。
- **Q: 任务未自动启动？**
  - 可手动点击“强制重启”或检查依赖是否安装。

---

## 支持环境

- OpenWrt 19.07/21.02/22.03 及以上
- 路由器、x86、ARM、NAS、虚拟机等
- 需预装 rsync、inotify-tools

---

## 联系方式

- 作者: [望天追风や]
- 邮箱: [xfghvgnfyjssjgte@gmail.com]

---

> 本项目开源，欢迎二次开发与贡献！



